function combinedMask = getMask_prev( trials, fieldNames )
% % MP_get_psth %
%PURPOSE:   Get trial mask defined by conjunction of unlimited trial conditions
%AUTHORS:   MJ Siniscalchi, 170113
%
%INPUT ARGUMENTS
%   trials:         structure generated by flex_getTrialMask()
%   fieldNames:     the field names involved
%
%OUTPUT ARGUMENTS
%   combinedMask:   mask where all fields are satisfied, i.e. an AND operation

temp = [];
for i = 1:length(fieldNames)
    prev_temp = [0; trials.(fieldNames{i})(1:end-1)];
    temp = [temp prev_temp]; %trialMasks as columns of array
end
combinedMask = all(temp,2); %true if all elements are non-zero

end

